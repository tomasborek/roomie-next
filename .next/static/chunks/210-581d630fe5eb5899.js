"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[210],{2076:function(e,n,t){var s=t(5893),r=(t(7294),t(387)),i=t(1681),a=t(3300);n.Z=function(e){var n=e.children,t=e.heading;(0,r.useRouter)();return(0,s.jsxs)("div",{className:"page-feed-layout",children:[(0,s.jsx)(i.Z,{variant:"white"}),(0,s.jsx)("div",{className:"layout-banner"}),(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"layout-content",children:[(0,s.jsx)("h2",{className:"content-heading",children:t}),n]})}),(0,s.jsx)(a.Z,{})]})}},7507:function(e,n,t){t.d(n,{Z:function(){return w}});var s=t(5893),r=t(7294),i=t(1018),a=t(6934),c=t(387),l=t(1664),u=t(1163),o=t(5182),d=(t(1294),t(1614)),f=t(7503);function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,s=new Array(n);t<n;t++)s[t]=e[t];return s}function p(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var s,r,i=[],a=!0,c=!1;try{for(t=t.call(e);!(a=(s=t.next()).done)&&(i.push(s.value),!n||i.length!==n);a=!0);}catch(l){c=!0,r=l}finally{try{a||null==t.return||t.return()}finally{if(c)throw r}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return m(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=function(e){var n=e.reqInfo,t=e.id,r=e.setOpen,c=e.setRequestLoading,m=e.setReqResolved,h=(0,a.s)(),g=(h.updateUser,h.getUser),v=(h.updateListing,h.addNotification,h.deleteNotification,p((0,o.r)(),2)),j=(v[0],v[1],(0,i.a)().currentUser),x=(0,d.d)().callable,y=((0,f.i)().snackBar,(0,u.useRouter)(),function(e){var s;c(!0),r(!1);var i=x("requests-resolveRequest");g(j.uid).then((function(r){m({state:!0,type:e}),c(!1),s=r;var a={senderUid:t,senderListing:n.listingId,recieverUid:j.uid,recieverListing:s.data().listing.id};i(JSON.stringify(a)),"accepted"===e&&q(s)}))}),q=function(e){var s=x("requests-createFriend"),r={reciever:e.data(),recieverUid:e.id,recieverListing:e.data().listing.id,sender:n,senderUid:t,senderListing:n.listingId};s(JSON.stringify(r))};return(0,s.jsxs)("div",{className:"recieved-req-full ".concat(n.premium&&"premium"),children:[(0,s.jsx)("i",{onClick:function(){return r(!1)},className:"fas fa-times full-close-icon"}),(0,s.jsx)("div",{className:"full-pfp-container",children:n.pfp?(0,s.jsx)("img",{src:n.pfp,className:"container-pfp"}):(0,s.jsx)("img",{src:"img/pfps/".concat("male"===n.gender?"radek-pfp.png":"radka-pfp.png"),className:"container-pfp"})}),(0,s.jsxs)("div",{className:"full-name",children:[n.username," ",n.premium&&(0,s.jsx)("i",{className:"fas fa-circle-check"})]}),(0,s.jsxs)("div",{className:"full-description",children:["male"===n.gender?"Mu\u017e":"female"===n.gender?"\u017dena":"other"===n.gender?"Jin\xe9":"",", ",n.age]}),(0,s.jsx)("div",{className:"full-message",children:n.message}),(0,s.jsxs)("div",{className:"full-actions",children:[(0,s.jsx)("button",{onClick:function(){return y("rejected")},className:"acc-btn",children:"Odm\xedtnout"}),(0,s.jsx)("button",{onClick:function(){return y("accepted")},className:"main-btn",children:"P\u0159ijmout"})]}),(0,s.jsx)(l.default,{href:"/".concat(n.type,"/").concat(n.listingId),children:(0,s.jsx)("a",{className:"full-profile-link",children:"Zobrazit inzer\xe1t..."})})]})},g=t(7227),v=t(8456),j=function(e){var n=e.reqInfo,t=e.id,i=(0,r.useState)(!1),a=i[0],l=i[1],u=(0,r.useState)(!1),o=u[0],d=u[1],f=(0,r.useState)({state:!1,type:""}),m=f[0],p=f[1];(0,c.useRouter)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:a,children:(0,s.jsx)(h,{reqInfo:n,id:t,setOpen:l,setRequestLoading:d,setReqResolved:p})}),o?(0,s.jsx)("div",{className:"rec-req-loading",children:(0,s.jsx)(v.Z,{})}):(0,s.jsx)(s.Fragment,{children:m.state?(0,s.jsx)("div",{className:"rec-req-resolved",children:(0,s.jsx)("i",{className:"fas fa-".concat(m.type&&"check"," ").concat("accepted"===m.type?"accepted":"rejected")})}):(0,s.jsxs)("div",{onClick:function(){return l(!0)},className:"rec-req ".concat(n.premium&&"premium"),children:[(0,s.jsx)("div",{className:"req-pfp-container",children:n.pfp?(0,s.jsx)("img",{src:n.pfp,className:"container-pfp"}):(0,s.jsx)("img",{src:"/img/pfps/".concat("male"===n.gender?"radek":"radka","-pfp.png"),className:"container-pfp"})}),(0,s.jsxs)("div",{onClick:function(){return l(!0)},className:"req-content",children:[(0,s.jsxs)("div",{className:"content-name",children:[n.username,", ",n.age," ",n.premium&&(0,s.jsx)("i",{className:"fas fa-circle-check"})]}),(0,s.jsx)("div",{className:"content-msg",children:"V\xe1s \u017e\xe1d\xe1 o kontaktn\xed \xfadaje."})]}),(0,s.jsx)("div",{className:"req-status",children:(0,s.jsx)("i",{className:"fas fa-hourglass-half"})})]})})]})};function x(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,s=new Array(n);t<n;t++)s[t]=e[t];return s}function y(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var s,r,i=[],a=!0,c=!1;try{for(t=t.call(e);!(a=(s=t.next()).done)&&(i.push(s.value),!n||i.length!==n);a=!0);}catch(l){c=!0,r=l}finally{try{a||null==t.return||t.return()}finally{if(c)throw r}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return x(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var q=function(e){var n=e.name,t=e.age,r=e.pfp,i=e.premium,c=e.listingId,l=e.type,d=(e.id,(0,u.useRouter)()),f=((0,a.s)().getUser,y((0,o.r)(),2));f[0],f[1];return(0,s.jsxs)("div",{onClick:function(){d.push("/".concat(l,"/").concat(c))},className:"sent-req ".concat(i&&"premium"),children:[(0,s.jsx)("div",{className:"req-pfp-container",children:r?(0,s.jsx)("img",{src:r,className:"container-pfp"}):(0,s.jsx)("div",{className:"container-pfp"})}),(0,s.jsxs)("div",{className:"req-content",children:[(0,s.jsxs)("div",{className:"content-user",children:[n,", ",t," ",i&&(0,s.jsx)("i",{className:"fas fa-circle-check"})]}),(0,s.jsx)("div",{className:"content-status",children:"\u017d\xe1dost \u010dek\xe1 na vy\u0159\xedzen\xed."})]}),(0,s.jsx)("div",{className:"req-status",children:(0,s.jsx)("i",{className:"fas fa-hourglass-half"})})]})},N=t(1739);function b(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},s=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),s.forEach((function(n){b(e,n,t[n])}))}return e}var w=function(e){var n=e.type,t=(0,i.a)().currentUser,c=(0,a.s)().getRequests,l=(0,r.useState)(null),u=l[0],o=l[1],d=(0,r.useState)(null),f=d[0],m=d[1],p=(0,r.useState)(null),h=p[0],g=p[1],x=(0,r.useState)(null),y=x[0],w=x[1],k=(0,r.useState)(null),S=k[0],O=k[1],P=(0,r.useState)(null),I=P[0],A=P[1],E=(0,r.useState)(1),U=E[0],Z=E[1],C=(0,r.useState)(!1),F=C[0],z=C[1];(0,r.useEffect)((function(){t&&"recieved"===n&&_("recievedRequests",t.uid,"first",null,null),t&&"sent"===n&&_("sentRequests",t.uid,"first",null,null)}),[t]);var L=function(e){"recieved"===n&&("next"===e&&_("recievedRequests",t.uid,e,f,h),"prev"===e&&_("recievedRequests",t.uid,e,f,h)),"sent"===n&&("next"===e&&_("sentRequests",t.uid,e,S,I),"prev"===e&&_("sentRequests",t.uid,e,S,I))},_=function(e,n,s,r,i){if("recievedRequests"===e){var a={};"first"===s&&c(e,n,s,null,null).then((function(e){var n=e.newPremiumRequests.concat(e.newRequests);m(e.newRequests),g(e.newPremiumRequests),n.forEach((function(e){a=R({},a,b({},e.id,e.data()))})),o(a)})),"next"===s&&(z(!0),c(e,n,s,r,i).then((function(e){var n=e.newPremiumRequests.concat(e.newRequests);listings.length>0&&(Z((function(e){return e+1})),m(e.newRequests),g(e.newPremiumRequests),n.forEach((function(e){a=R({},a,b({},e.id,e.data()))})),o(a)),z(!1)}))),"prev"===s&&(z(!0),c(e,n,s,r,i).then((function(e){var n=e.newPremiumRequests.concat(e.newRequests);n.length>0?(Z((function(e){return e-1})),m(e.newRequests),g(e.newPremiumRequests),n.forEach((function(e){a=R({},a,b({},e.id,e.data()))})),o(a),z(!1)):z(!1)})))}if("sentRequests"===e){var l={};"first"===s&&c(e,n,t.uid,"first",null,null).then((function(e){var n=e.newPremiumRequests.concat(e.newRequests);O(e.newRequests),A(e.newPremiumRequests),n.forEach((function(e){l=R({},l,b({},e.id,e.data()))})),w(l)})),"next"===s&&(z(!0),c(e,n,s,r,i).then((function(e){var n=e.newPremiumRequests.concat(e.newRequests);n.length>0?(Z((function(e){return e+1})),O(e.newRequests),A(e.newPremiumRequests),n.forEach((function(e){l=R({},l,b({},e.id,e.data()))})),w(a),z(!1)):z(!1)}))),"prev"===s&&(z(!0),c(e,n,s,r,i).then((function(e){var n=e.newPremiumRequests.concat(e.newRequests);n.length>0?(Z((function(e){return e-1})),O(e.newRequests),A(e.newPremiumRequests),n.forEach((function(e){l=R({},l,b({},e.id,e.data()))})),w(a),z(!1)):z(!1)})))}};return(0,s.jsxs)(s.Fragment,{children:["recieved"===n&&(0,s.jsx)(s.Fragment,{children:u?(0,s.jsx)(s.Fragment,{children:Object.keys(u).length?(0,s.jsxs)("div",{className:"reqs-feed-recieved",children:[(0,s.jsx)("p",{className:"pending-heading",children:"Nevy\u0159e\u0161en\xe9 \u017e\xe1dosti"}),Object.keys(u).map((function(e,n){return(0,s.jsx)(j,{reqInfo:u[e],id:e},n)})),Object.keys(u).length>9||1!=U?(0,s.jsx)(N.Z,{setPage:Z,page:U,handlePagination:L,isDisabled:F}):""]}):(0,s.jsxs)("div",{className:"reqs-feed-empty",children:[(0,s.jsx)("img",{src:"/img/bad-results/notfound.png",width:184,height:208}),(0,s.jsx)("p",{children:"Nebyly nalezen\xe9 \u017e\xe1dn\xe9 nevy\u0159e\u0161en\xe9 \u017e\xe1dosti."})]})}):(0,s.jsx)("div",{className:"reqs-feed-loading",children:(0,s.jsx)(v.Z,{})})}),"sent"===n&&(0,s.jsx)(s.Fragment,{children:y?(0,s.jsx)(s.Fragment,{children:Object.keys(y).length?(0,s.jsxs)("div",{className:"reqs-feed-sent",children:[(0,s.jsx)("h3",{className:"sent-heading",children:"Odeslan\xe9 \u017e\xe1dosti"}),Object.keys(y).map((function(e,n){return(0,s.jsx)(q,{name:y[e].username,age:y[e].age,pfp:y[e].pfp,premium:y[e].premium,listingId:y[e].listingId,type:y[e].type,id:e},n)})),Object.keys(y).length>9||1!=U?(0,s.jsx)(N.Z,{setPage:Z,page:U,handlePagination:L,isDisabled:F}):""]}):(0,s.jsxs)("div",{className:"reqs-feed-empty",children:[(0,s.jsx)("img",{src:"/img/bad-results/notfound.png",width:184,height:208}),(0,s.jsx)("p",{children:"Nebyly nalezen\xe9 \u017e\xe1dn\xe9 nevy\u0159e\u0161en\xe9 \u017e\xe1dosti."})]})}):(0,s.jsx)("div",{className:"reqs-feed-loading",children:(0,s.jsx)(v.Z,{})})})]})}}}]);